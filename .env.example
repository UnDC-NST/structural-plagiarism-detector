# ============================================================================
# PRODUCTION ENVIRONMENT TEMPLATE
# ============================================================================
# Copy this file to .env and fill in your values
# NEVER commit .env to version control!

# ── Server Configuration ────────────────────────────────────────────────────
NODE_ENV=production
PORT=3000

# ── Database Configuration ──────────────────────────────────────────────────
# For production, use MongoDB Atlas or a managed MongoDB instance
MONGO_URI=mongodb://localhost:27017/plagiarism-detector

# Set to 'true' only for local development/testing (no MongoDB needed)
USE_IN_MEMORY_DB=false

# MongoDB Connection Pool (tune based on traffic)
MONGO_POOL_SIZE=10
MONGO_CONNECT_TIMEOUT_MS=10000
MONGO_SERVER_SELECTION_TIMEOUT_MS=5000

# ── Authentication ──────────────────────────────────────────────────────────
# CRITICAL: Generate a strong random key (min 32 characters)
# Example: openssl rand -base64 32
API_KEY=your-super-secret-api-key-minimum-32-chars

# ── Rate Limiting ───────────────────────────────────────────────────────────
# Window in milliseconds (60000 = 1 minute)
RATE_LIMIT_WINDOW_MS=60000

# Maximum requests per window
RATE_LIMIT_MAX_REQUESTS=100

# ── CORS Configuration ──────────────────────────────────────────────────────
# Comma-separated list of allowed origins
ALLOWED_ORIGINS=http://localhost:3000,https://yourdomain.com

# ── Cache Configuration ─────────────────────────────────────────────────────
# Enable/disable caching layer
CACHE_ENABLED=true

# Time-to-live in seconds (300 = 5 minutes)
CACHE_TTL_SECONDS=300

# Maximum number of cached entries (LRU eviction)
CACHE_MAX_SIZE=1000

# ── Circuit Breaker ─────────────────────────────────────────────────────────
# Number of failures before opening circuit
CIRCUIT_BREAKER_THRESHOLD=5

# Timeout in milliseconds before attempting to close circuit (60000 = 1 minute)
CIRCUIT_BREAKER_TIMEOUT=60000

# ── Performance Tuning ──────────────────────────────────────────────────────
# Maximum code size in bytes (50000 = ~50KB)
MAX_CODE_SIZE_BYTES=50000

# ── Logging ─────────────────────────────────────────────────────────────────
# Log level: debug | info | warn | error
LOG_LEVEL=info

# ── Health Check ────────────────────────────────────────────────────────────
# Health check interval in milliseconds (30000 = 30 seconds)
HEALTH_CHECK_INTERVAL=30000

# ============================================================================
# DEVELOPMENT OVERRIDES
# ============================================================================
# For local development, you can use these simplified settings:
#
# NODE_ENV=development
# USE_IN_MEMORY_DB=true
# API_KEY=dev-key-for-testing-only
# CACHE_ENABLED=false
# LOG_LEVEL=debug
